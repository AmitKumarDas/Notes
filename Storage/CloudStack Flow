  - Typical Http Flow -
  -------------------------
  - A command as a http query param
  - Command attributes are http query params
  - Intercepted @ servlet layer & transformed to the required Command
  - Now the base commands has the list of ALL possible Services - injected services
  - execute of Command is invoked @ servlet layer
  - Appropriate Injected Service's method invoked taking in 'this'. i.e. Command object as a param
  - Typically One usecase in a Command - single responsibility - CreateStoragePoolCmd
  
  - Typical Plugin Requirement -
  -------------------------------   
  - Driver Impl 
  - LifeCycle Impl 
  - Provider Impl 
  
  # note - ProviderManager is managed by CS
  
  - Making sure your Data Store Provider get Called -
  ------------------------------------------
  - DataStoreProviderManagerImpl will have a list of several Provider Impls.
  - The getDataStoreProvider(String) of DataStoreProviderManagerImpl is the key
  - The name of the Storage provider will be received from the Command itself
  - e.g. CreateStoragePoolCmd has method called getStorageProviderName
 
 
 - A Storage Usecase :: AttachVolume -
 ---------------------------------------
 - starts with AttachVolumeCmd
 - Service layer i.e. VolumeMgrImpl - attachVolumeToVM
 - Service layer - 
 
 
 - Volume - Learn the Domain -
 -----------------------------------------------
 - com.cloud.storage.Volume
 - once attached to a VM it has got a InstanceId
 - can give its State . i.e. Destroyed etc
 - one of its TYPE is - DATADISK
 - 
  
  - Typical Resource Ops Flow -
  --------------------------------
  - CloudStackPrimaryDataStoreLifeCycleImpl
   # Initialize
    - usecase ~ StorageManagerImpl                     ~ cloud-storage
     - LocalStoragePoolListener                        ~ cloud-server
      - AgentManagerImpl                               ~ cloud-server
       - handleConnectedAgent
        - task
       - handleDirectConnectAgent
        - ResourceManagerImpl                          ~ cloud-server
         - A resource from plugin
          - XXXCmd
           - ApiDispatcher
            - AsyncJobManagerImpl                      ~ cloud-server
       
  
  - Adapter ~ Pluggable Code within Cloud Stack
  ---------------------------------------------------
  - A ComponentLifeCycle interface  ~ configure/start/stop/run-level
  - ComponentLifeCycleBase implements ComponentLifeCycle
  
  - An Adapter interface extends ComponentLifeCycle  interface  
  - A concrete AdapterBase extends ComponentLifeCycleBase implements Adapter
  
  - An adapter LifeCycle Interface extends Adapter  
  - An abstract adapter LifeCycle extends AdapterBase implements LifeCycle interface  
  - A concrete adapter LifeCycle Impl extends abstract adapter lifecycle in plugin project
  
  
  - PluggableService ~ Method for Pluggable Code within CS
  ---------------------------------------------------------------
  - A ComponentLifeCycle interface  ~ configure/start/stop/run-level
  - PluggableService interface ~ expose pluggable methods
  - An Adapter interface extends ComponentLifeCycle  interface  
  - A ResourceStateAdapter interface extends Adapter interface ~ used for Agent Ops
  
  - A Plugin Interface extends PluggableService ... 
  - A concrete plugin impl extends AbstractBase, implements ResourceStateAdapter, someotherLifecycleInterface, PluginInterface
  
  
  
  
  Questions ?
  - --------------
  1/  DefaultPrimaryDataStoreProviderManagerImpl & DataStoreProviderManagerImpl have a cyclic dependency!
  
      Why does DataStoreProviderManagerImpl compose DefaultPrimaryDataStoreProviderManagerImpl ?
      
      DefaultPrimaryDataStoreProviderManagerImpl composes the DataStoreProviderManagerImpl, which seems fine.
      The registerDriver & registerHostListener can be done in DefaultPrimaryDataStoreProviderManagerImpl class itself in its 
      @PostConstruct method . Ofcourse, this will be effective only when getDataStoreProviders() of
      DataStoreProviderManagerImpl returns the providers instead of null.
      
      An alternative approach might be to have DefaultPrimaryDataStoreProviderManagerImpl extend
      DataStoreProviderManagerImpl instead of composing the latter. This way the configure method can be overridden to register
      drivers & host listeners.
      
  
